syntax = "proto3";


message ShiftServerData {

	MSBaseEventId basevtid = 1;
	MSServerEvent svevtid = 2;  // Event type
	MSPlayerEvent plevtid = 3;  // Sub ev type
	SessionData session = 4; // SessionData
	ClientData clData = 5; // ClientData
	repeated sGameObject updatedGameObjects = 6; // GameObjects list

	// interaction message
	ObjectAction interaction = 7;
	PlayerObject playerObject = 8;
	ShiftServerError errorReason = 9;
}

/// Control message ID.
enum MSBaseEventId
{
	PlayerEvent = 0;
	ServerEvent = 1;
};

/// Control message ID.
enum MSPlayerEvent
{

	//Interaction events
	OnCreatePlayer = 0;
	OnMove = 1;
	OnAttack = 2;
	OnDead = 3;
	OnUse = 4;

};

enum MSServerEvent
{
	Invalid = 0;					
	GameserverSessionRequest = 5;	
	GameserverSessionEstablished = 6;
	Diagnostic = 8;					
	JoinRequest = 9;				
	JoinRequestSuccess = 10;		
	JoinRequestFailed= 11;			
	Stats = 13;						
	ConnectRequest = 18;			
	ConnectOK = 19;			
	ConnectionClosed = 20;			
	NoConnection = 21;				
	PingRequest = 22;				
	WorldUpdate = 23;				
}
enum ShiftServerError
{
	OldClientVersion = 0; // Application.version
	NoSession = 1;		  // Session
	SocketAbuse = 2;	  // Possible dos to client
	WrongCredentials = 3; // Wrong login credentials

}
message SessionData {
	string sid = 2;
}

message ObjectAction {

	sGameObject currentObject = 1;
	repeated sGameObject interactedObjects = 2;
}

message ClientData {

	string ver = 1;
	string loginname = 2;
	string machine_name = 3;
	string machine_id = 4;
	string guid = 5;
}

message sGameObject {

	string guid = 1;

	float pos_x = 2;
	float pos_y = 3;
	float pos_z = 4;

}

message PlayerObject {

	sGameObject pObject = 1;
	PlayerClass pClass = 2;
	int32 currentHp = 3;
	int32 maxHp = 4;

}

enum PlayerClass {

	Warrior = 0;
	Archer = 1;
	Mage = 2;
	Priest = 3;
}

message PlayerInput {

	int32 oid = 1;
}

